/**
 * @name jquery.Thailand.js
 * @version 1.0.2
 * @update Apr 8, 2017
 * @website https://github.com/earthchie/jquery.Thailand.js
 * @author Earthchie http://www.earthchie.com/
 * @license WTFPL v.2 - http://www.wtfpl.net/
 *
 * @dependency: jQuery <https://jquery.com/>
 *              JSZIP <https://stuk.github.io/jszip/>
 *              typehead.js <https://twitter.github.io/typeahead.js/>
 *              JQL.js <https://github.com/earthchie/JQL.js>
 **/
$.Thailand=function(e){"use strict";e=$.extend({database:"./db.json",autocomplete_size:20,onComplete:function(){},$district:$('[name="district"]'),$amphoe:$('[name="amphoe"]'),$province:$('[name="province"]'),$zipcode:$('[name="zipcode"]')},e),$.getJSON(e.database,function(t){var a=new JQL(t),i={hint:!0,highlight:!0,minLength:0},c={empty:" ",suggestion:function(e){return"<div>"+e.d+" » "+e.a+" » "+e.p+" » "+(e.z||"<i>ไม่มีรหัสไปรษณีย์</i>")+"</div>"}},n=function(t,a){e.$district.val(a.d),e.$amphoe.val(a.a),e.$province.val(a.p),e.$zipcode.val(a.z)};e.$district.typeahead(i,{limit:e.autocomplete_size,templates:c,source:function(e){return function(e,t){var i=[];try{i=a.select("*").where("d").match("^"+e).orderBy("d").fetch()}catch(e){}t(i)}}(),display:function(e){return e.d}}),e.$amphoe.typeahead(i,{limit:e.autocomplete_size,templates:c,source:function(e){return function(e,t){var i=[];try{i=a.select("*").where("a").match("^"+e).orderBy("a").fetch()}catch(e){}t(i)}}(),display:function(e){return e.a}}),e.$province.typeahead(i,{limit:e.autocomplete_size,templates:c,source:function(e){return function(e,t){var i=[];try{i=a.select("*").where("p").match("^"+e).orderBy("p").fetch()}catch(e){}t(i)}}(),display:function(e){return e.p}}),e.$zipcode.typeahead(i,{limit:e.autocomplete_size,templates:c,source:function(e){return function(e,t){var i=[];try{i=a.select("*").where("z").match("^"+e).orderBy("z").fetch()}catch(e){}t(i)}}(),display:function(e){return e.z}}),e.$district.bind("typeahead:select typeahead:autocomplete",n),e.$amphoe.bind("typeahead:select typeahead:autocomplete",n),e.$province.bind("typeahead:select typeahead:autocomplete",n),e.$zipcode.bind("typeahead:select typeahead:autocomplete",n),"function"==typeof e.onComplete&&e.onComplete()}).fail(function(t){throw new Error('Error: File "'+e.database+'" is not exists.')})};
