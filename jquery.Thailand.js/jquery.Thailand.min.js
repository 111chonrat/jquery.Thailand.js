/**
 * @name jquery.Thailand.js
 * @version 1.0.2
 * @update Apr 8, 2017
 * @website https://github.com/earthchie/jquery.Thailand.js
 * @author Earthchie http://www.earthchie.com/
 * @license WTFPL v.2 - http://www.wtfpl.net/
 *
 * @dependency: jQuery <https://jquery.com/>
 *              JSZIP <https://stuk.github.io/jszip/>
 *              typehead.js <https://twitter.github.io/typeahead.js/>
 *              JQL.js <https://github.com/earthchie/JQL.js>
 **/
$.Thailand=function(a){"use strict";a=$.extend({database:"./db.zip",autocomplete_size:20,onComplete:function(){},$district:$('[name="district"]'),$amphoe:$('[name="amphoe"]'),$province:$('[name="province"]'),$zipcode:$('[name="zipcode"]')},a),JSZipUtils.getBinaryContent(a.database,function(b,c){if(b)throw'Error: File "'+a.database+'" is not exists.';JSZip.loadAsync(c).then(function(b){b.file("db.json").async("string").then(function(b){var c=new JQL(b),d={hint:!0,highlight:!0,minLength:0},e={empty:" ",suggestion:function(a){return"<div>"+a.d+" » "+a.a+" » "+a.p+" » "+(a.z||"<i>ไม่มีรหัสไปรษณีย์</i>")+"</div>"}},f=function(b,c){a.$district.val(c.d),a.$amphoe.val(c.a),a.$province.val(c.p),a.$zipcode.val(c.z)};a.$district.typeahead(d,{limit:a.autocomplete_size,templates:e,source:function(a){return function(b,d){var e=[];try{e=c.select("*").where("d").match("^"+b).orderBy("d").fetch()}catch(a){}d(e)}}(),display:function(a){return a.d}}),a.$amphoe.typeahead(d,{limit:a.autocomplete_size,templates:e,source:function(a){return function(b,d){var e=[];try{e=c.select("*").where("a").match("^"+b).orderBy("a").fetch()}catch(a){}d(e)}}(),display:function(a){return a.a}}),a.$province.typeahead(d,{limit:a.autocomplete_size,templates:e,source:function(a){return function(b,d){var e=[];try{e=c.select("*").where("p").match("^"+b).orderBy("p").fetch()}catch(a){}d(e)}}(),display:function(a){return a.p}}),a.$zipcode.typeahead(d,{limit:a.autocomplete_size,templates:e,source:function(a){return function(b,d){var e=[];try{e=c.select("*").where("z").match("^"+b).orderBy("z").fetch()}catch(a){}d(e)}}(),display:function(a){return a.z}}),a.$district.bind("typeahead:select typeahead:autocomplete",f),a.$amphoe.bind("typeahead:select typeahead:autocomplete",f),a.$province.bind("typeahead:select typeahead:autocomplete",f),a.$zipcode.bind("typeahead:select typeahead:autocomplete",f),"function"==typeof a.onComplete&&a.onComplete()})})})};