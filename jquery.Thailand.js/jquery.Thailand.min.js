/**
 * @name jquery.Thailand.js
 * @version 1.0.1
 * @update Apr 8, 2017
 * @website https://github.com/earthchie/jquery.Thailand.js
 * @author Earthchie http://www.earthchie.com/
 * @license WTFPL v.2 - http://www.wtfpl.net/
 *
 * @dependency: jQuery <https://jquery.com/>
 *              JSZIP <https://stuk.github.io/jszip/>
 *              typehead.js <https://twitter.github.io/typeahead.js/>
 *              JQL.js <https://github.com/earthchie/JQL.js>
 **/
$.Thailand=function(e){"use strict";e=$.extend({database:"./db2.zip",autocomplete_size:20,onComplete:function(){},$district:$('[name="district"]'),$amphoe:$('[name="amphoe"]'),$province:$('[name="province"]'),$zipcode:$('[name="zipcode"]')},e),JSZipUtils.getBinaryContent(e.database,function(t,a){JSZip.loadAsync(a).then(function(t){t.file("db3.json").async("string").then(function(t){var a=JSON.parse(t),n=a.data.map(function(e){return{d:a.lookup[e[0]],a:a.lookup[e[1]],p:a.lookup[e[2]],z:e[3]}}),i=new JQL(n),o={hint:!0,highlight:!0,minLength:0},c={empty:" ",suggestion:function(e){return"<div>"+e.d+" » "+e.a+" » "+e.p+" » "+(e.z||"<i>ไม่มีรหัสไปรษณีย์</i>")+"</div>"}},p=function(t,a){e.$district.val(a.d),e.$amphoe.val(a.a),e.$province.val(a.p),e.$zipcode.val(a.z)};e.$district.typeahead(o,{limit:e.autocomplete_size,templates:c,source:function(e){return function(e,t){var a=[];try{a=i.select("*").where("d").match("^"+e).orderBy("d").fetch()}catch(e){}t(a)}}(),display:function(e){return e.d}}),e.$amphoe.typeahead(o,{limit:e.autocomplete_size,templates:c,source:function(e){return function(e,t){var a=[];try{a=i.select("*").where("a").match("^"+e).orderBy("a").fetch()}catch(e){}t(a)}}(),display:function(e){return e.a}}),e.$province.typeahead(o,{limit:e.autocomplete_size,templates:c,source:function(e){return function(e,t){var a=[];try{a=i.select("*").where("p").match("^"+e).orderBy("p").fetch()}catch(e){}t(a)}}(),display:function(e){return e.p}}),e.$zipcode.typeahead(o,{limit:e.autocomplete_size,templates:c,source:function(e){return function(e,t){var a=[];try{a=i.select("*").where("z").match("^"+e).orderBy("z").fetch()}catch(e){}t(a)}}(),display:function(e){return e.z}}),e.$district.bind("typeahead:select typeahead:autocomplete",p),e.$amphoe.bind("typeahead:select typeahead:autocomplete",p),e.$province.bind("typeahead:select typeahead:autocomplete",p),e.$zipcode.bind("typeahead:select typeahead:autocomplete",p),"function"==typeof e.onComplete&&e.onComplete()})})})};