/**
 * @name jquery.Thailand.js
 * @version 1.0.1
 * @update Apr 8, 2017
 * @website https://github.com/earthchie/jquery.Thailand.js
 * @author Earthchie http://www.earthchie.com/
 * @license WTFPL v.2 - http://www.wtfpl.net/
 *
 * @dependency: jQuery <https://jquery.com/>
 *              JSZIP <https://stuk.github.io/jszip/>
 *              typehead.js <https://twitter.github.io/typeahead.js/>
 *              JQL.js <https://github.com/earthchie/JQL.js>
 **/
$.Thailand=function(e){"use strict";e=$.extend({database:"./db2.zip",autocomplete_size:20,onComplete:function(){},$district:$('[name="district"]'),$amphoe:$('[name="amphoe"]'),$province:$('[name="province"]'),$zipcode:$('[name="zipcode"]')},e),JSZipUtils.getBinaryContent(e.database,function(t,a){JSZip.loadAsync(a).then(function(t){t.file("db2.json").async("string").then(function(t){t=JSON.parse(t).map(function(e){return{d:e[0],a:e[1],p:e[2],z:e[3]}});var a=new JQL(t),n={hint:!0,highlight:!0,minLength:0},i={empty:" ",suggestion:function(e){return"<div>"+e.d+" » "+e.a+" » "+e.p+" » "+(e.z||"<i>ไม่มีรหัสไปรษณีย์</i>")+"</div>"}},c=function(t,a){e.$district.val(a.d),e.$amphoe.val(a.a),e.$province.val(a.p),e.$zipcode.val(a.z)};e.$district.typeahead(n,{limit:e.autocomplete_size,templates:i,source:function(e){return function(e,t){var n=[];try{n=a.select("*").where("d").match("^"+e).orderBy("d").fetch()}catch(e){}t(n)}}(),display:function(e){return e.d}}),e.$amphoe.typeahead(n,{limit:e.autocomplete_size,templates:i,source:function(e){return function(e,t){var n=[];try{n=a.select("*").where("a").match("^"+e).orderBy("a").fetch()}catch(e){}t(n)}}(),display:function(e){return e.a}}),e.$province.typeahead(n,{limit:e.autocomplete_size,templates:i,source:function(e){return function(e,t){var n=[];try{n=a.select("*").where("p").match("^"+e).orderBy("p").fetch()}catch(e){}t(n)}}(),display:function(e){return e.p}}),e.$zipcode.typeahead(n,{limit:e.autocomplete_size,templates:i,source:function(e){return function(e,t){var n=[];try{n=a.select("*").where("z").match("^"+e).orderBy("z").fetch()}catch(e){}t(n)}}(),display:function(e){return e.z}}),e.$district.bind("typeahead:select typeahead:autocomplete",c),e.$amphoe.bind("typeahead:select typeahead:autocomplete",c),e.$province.bind("typeahead:select typeahead:autocomplete",c),e.$zipcode.bind("typeahead:select typeahead:autocomplete",c),"function"==typeof e.onComplete&&e.onComplete()})})})};